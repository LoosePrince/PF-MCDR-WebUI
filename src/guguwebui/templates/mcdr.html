<!DOCTYPE html>
<html lang="zh-CN" class="h-full" x-data="{ darkMode: localStorage.getItem('darkMode') === 'true', sidebarOpen: window.innerWidth >= 1024 }" :class="{ 'dark': darkMode }">
<head>
    <meta charset="UTF-8">
    
    <title data-i18n="page.mcdr.title"></title>
    <!-- 主题预加载脚本 - 防止闪烁 -->
    <script src="js/theme-preload.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Alpine.js -->
    <script defer src="js/alpine.min.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- 自定义CSS -->
    <link rel="stylesheet" href="css/main.css">
    <!-- MCDR配置JS -->
    <script defer src="js/mcdr-config.js"></script>
    <!-- Tailwind配置 -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 3s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-5px)' },
                        }
                    }
                },
            },
        }
    </script>
    <!-- i18n -->
    <script defer src="js/i18n.js"></script>
</head>
<body class="h-full bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300">
    <div x-data="mcdrConfigApp()" x-init="init()">
        <!-- 侧边栏 -->
        {% include "sideNavigator.html" %}
        
        <!-- 主内容区 -->
        <div id="main-content" :class="{'sidebar-open': sidebarOpen}" class="main-content min-h-screen transition-all duration-300">
            <!-- 顶部导航栏 -->
            <header id="header" class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 h-16 fixed top-0 right-0 left-0 z-20" :class="{'left-0': !sidebarOpen, 'left-[260px]': sidebarOpen}">
                <div class="h-full px-4 sm:px-6 flex items-center justify-between">
                    <!-- 左侧部分 -->
                    <div class="flex items-center">
                        <!-- 移动端菜单按钮 -->
                        <button @click="sidebarOpen = !sidebarOpen" class="inline-flex items-center justify-center p-2 rounded-md text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none transition-colors">
                            <i :class="sidebarOpen ? 'fa-times' : 'fa-bars'" class="fas"></i>
                        </button>
                        
                        <!-- 页面标题 -->
                        <h1 class="ml-4 text-xl font-semibold text-gray-800 dark:text-white" data-i18n="page.mcdr.title"></h1>
                    </div>
                    
                    <!-- 右侧部分 -->
                    <div class="flex items-center space-x-4">
                        <!-- 公告 -->
                        <div class="nav-notice hidden md:flex items-center bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 px-3 py-1 rounded-full text-xs font-medium mr-2">
                            <span class="nav-notice-text"><i class="fas fa-circle-notch fa-spin mr-1.5"></i> <span data-i18n="common.notice_loading"></span></span>
                        </div>
                    
                        <!-- 服务器状态 -->
                        <div class="hidden sm:flex items-center">
                            <div class="px-3 py-1 rounded-full text-xs font-medium flex items-center" :class="{
                                'bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300': serverStatus === 'online',
                                'bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300': serverStatus === 'offline',
                                'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300': serverStatus === 'error',
                                'bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-300': serverStatus === 'loading'
                            }">
                                <span x-show="serverStatus === 'online'" class="flex items-center">
                                    <i class="fas fa-circle mr-1 text-xs"></i>
                                    <span data-i18n="nav.status_online"></span>
                                </span>
                                <span x-show="serverStatus === 'offline'" class="flex items-center">
                                    <i class="fas fa-circle mr-1 text-xs"></i>
                                    <span data-i18n="nav.status_offline"></span>
                                </span>
                                <span x-show="serverStatus === 'error'" class="flex items-center">
                                    <i class="fas fa-exclamation-triangle mr-1"></i>
                                    <span data-i18n="nav.status_error"></span>
                                </span>
                                <span x-show="serverStatus === 'loading'" class="flex items-center">
                                    <i class="fas fa-circle-notch fa-spin mr-1 text-xs"></i>
                                    <span data-i18n="nav.status_loading"></span>
                                </span>
                            </div>
                        </div>
                        
                        <!-- 配置文件选择 -->
                        <div class="hidden md:flex items-center space-x-2">
                            <button 
                                @click="loadConfig('config.yml')" 
                                :class="{'active': activeConfigFile === 'config.yml'}"
                                class="config-file-btn">
                                <span data-i18n="page.mcdr.config.config_yml"></span>
                            </button>
                            <button 
                                @click="loadConfig('permission.yml')" 
                                :class="{'active': activeConfigFile === 'permission.yml'}"
                                class="config-file-btn">
                                <span data-i18n="page.mcdr.config.permission_yml"></span>
                            </button>
                        </div>
                        
                        <!-- 主题切换 -->
                        <button @click="darkMode = !darkMode; localStorage.setItem('darkMode', darkMode)" class="inline-flex items-center justify-center p-2 rounded-md text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none transition-colors">
                            <i class="fas" :class="darkMode ? 'fa-sun' : 'fa-moon'"></i>
                        </button>
                        
                        <!-- 用户信息 -->
                        <div class="flex items-center">
                            <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white user-avatar overflow-hidden">
                                <i class="fas fa-user"></i>
                            </div>
                            <span class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-300 js-username">
                                <span x-show="userName" x-text="userName"></span>
                                <span x-show="!userName" data-i18n="common.user"></span>
                            </span>
                        </div>
                    </div>
                </div>
            </header>
            
            <!-- 主内容 -->
            <main class="pt-24 px-4 sm:px-6 md:px-8 pb-8">
                <!-- 移动端配置文件选择 -->
                <div class="flex md:hidden items-center space-x-2 mb-6">
                    <button 
                        @click="loadConfig('config.yml')" 
                        :class="{'active': activeConfigFile === 'config.yml'}"
                        class="config-file-btn flex-1 py-2">
                        <span data-i18n="page.mcdr.config.config_yml"></span>
                    </button>
                    <button 
                        @click="loadConfig('permission.yml')" 
                        :class="{'active': activeConfigFile === 'permission.yml'}"
                        class="config-file-btn flex-1 py-2">
                        <span data-i18n="page.mcdr.config.permission_yml"></span>
                    </button>
                </div>
                
                <!-- 顶部介绍信息 -->
                <div class="about-list mb-6">
                    <div class="about-item">
                        <p class="font-medium" data-i18n="page.mcdr.about.title"></p>
                        <p class="text-gray-500 dark:text-gray-400 mt-1"><span data-i18n="page.mcdr.about.check"></span> <a href="https://docs.mcdreforged.com/zh-cn/latest/configuration.html#basic-configuration" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline" data-i18n="page.mcdr.about.doc"></a> <span data-i18n="page.mcdr.about.more"></span></p>
                        <div class="flex flex-wrap gap-2 mt-2">
                            <a href="https://docs.mcdreforged.com/zh-cn/latest/configuration.html#basic-configuration" target="_blank" class="text-xs px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800/30 transition">
                                <i class="fas fa-book mr-1"></i><span data-i18n="page.mcdr.about.view_doc"></span>
                            </a>
                            <a href="https://mcdreforged.com/zh-CN" target="_blank" class="text-xs px-3 py-1.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800/30 transition">
                                <i class="fas fa-globe mr-1"></i><span data-i18n="page.mcdr.about.site"></span>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- CONFIG.YML 配置表单 -->
                <div id="config-yml-form" x-show="activeConfigFile === 'config.yml'" class="config-section">
                    <h2 class="config-title" data-i18n="page.mcdr.config.basic"></h2>
                    
                <div class="config-item">
                        <label class="config-label" for="language">
                            <span data-i18n="page.mcdr.form.language"></span>
                            <span class="config-tip" data-i18n="page.mcdr.form.language_tip"></span>
                        </label>
                        <select id="language" class="config-select" data-key="language">
                            <option value="en_us" data-i18n="page.mcdr.form.language_en"></option>
                            <option value="zh_cn" data-i18n="page.mcdr.form.language_zh"></option>
                        </select>
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="working_directory">
                            <span data-i18n="page.mcdr.form.working_directory"></span>
                            <span class="config-tip" data-i18n="page.mcdr.form.working_directory_tip"></span>
                        </label>
                        <input type="text" id="working_directory" class="config-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="working_directory">
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="start_command">
                            <span data-i18n="page.mcdr.form.start_command"></span>
                            <span class="config-tip" data-i18n="page.mcdr.form.start_command_tip"></span>
                        </label>
                        <div class="about-list">
                            <div class="about-item">
                                <p data-i18n="page.mcdr.form.start_example"></p>
                                <p class="mt-1"><span data-i18n="page.mcdr.form.start_yaml"></span> <a href="https://docs.mcdreforged.com/zh-cn/latest/configuration.html#start-command" target="_blank" data-i18n="page.mcdr.about.doc"></a></p>
                            </div>
                        </div>
                        <input type="text" id="start_command" class="config-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="start_command">
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="handler">
                            <span data-i18n="page.mcdr.form.handler"></span>
                            <span class="config-tip" data-i18n="page.mcdr.form.handler_tip"></span>
                        </label>
                        <div class="about-list">
                            <div class="about-item">
                                <p data-i18n="page.mcdr.form.handler_desc"></p>
                                <p class="mt-1" data-i18n="page.mcdr.form.handler_desc2"></p>
                                <p class="mt-1" data-i18n="page.mcdr.form.handler_supported"></p>
                                <ul>
                                    <li><span class="font-medium">vanilla_handler</span> - <span data-i18n="page.mcdr.form.handler_vanilla"></span></li>
                                    <li><span class="font-medium">beta18_handler</span> - <span data-i18n="page.mcdr.form.handler_beta18"></span></li>
                                    <li><span class="font-medium">bukkit_handler</span> - <span data-i18n="page.mcdr.form.handler_bukkit"></span></li>
                                    <li><span class="font-medium">bukkit14_handler</span> - <span data-i18n="page.mcdr.form.handler_bukkit14"></span></li>
                                    <li><span class="font-medium">forge_handler</span> - <span data-i18n="page.mcdr.form.handler_forge"></span></li>
                                    <li><span class="font-medium">cat_server_handler</span> - <span data-i18n="page.mcdr.form.handler_cat_server"></span></li>
                                    <li><span class="font-medium">arclight_handler</span> - <span data-i18n="page.mcdr.form.handler_arclight"></span></li>
                                    <li><span class="font-medium">bungeecord_handler</span> - <span data-i18n="page.mcdr.form.handler_bungeecord"></span></li>
                                    <li><span class="font-medium">waterfall_handler</span> - <span data-i18n="page.mcdr.form.handler_waterfall"></span></li>
                                    <li><span class="font-medium">velocity_handler</span> - <span data-i18n="page.mcdr.form.handler_velocity"></span></li>
                                    <li><span class="font-medium">basic_handler</span> - <span data-i18n="page.mcdr.form.handler_basic"></span></li>
                                </ul>
                            </div>
                        </div>
                        <select id="handler" class="config-select" data-key="handler">
                            <option value="vanilla_handler" data-i18n="page.mcdr.form.handler_vanilla_option"></option>
                            <option value="beta18_handler" data-i18n="page.mcdr.form.handler_beta18_option"></option>
                            <option value="bukkit_handler" data-i18n="page.mcdr.form.handler_bukkit_option"></option>
                            <option value="bukkit14_handler" data-i18n="page.mcdr.form.handler_bukkit14_option"></option>
                            <option value="forge_handler" data-i18n="page.mcdr.form.handler_forge_option"></option>
                            <option value="cat_server_handler" data-i18n="page.mcdr.form.handler_cat_server_option"></option>
                            <option value="arclight_handler" data-i18n="page.mcdr.form.handler_arclight_option"></option>
                            <option value="bungeecord_handler" data-i18n="page.mcdr.form.handler_bungeecord_option"></option>
                            <option value="waterfall_handler" data-i18n="page.mcdr.form.handler_waterfall_option"></option>
                            <option value="velocity_handler" data-i18n="page.mcdr.form.handler_velocity_option"></option>
                            <option value="basic_handler" data-i18n="page.mcdr.form.handler_basic_option"></option>
                        </select>
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="encoding">
                            <span data-i18n="page.mcdr.form.encoding"></span>
                            <span class="config-tip" data-i18n="page.mcdr.form.encoding_tip"></span>
                        </label>
                        <div class="about-list">
                            <div class="about-item">
                                <p data-i18n="page.mcdr.form.encoding_desc"></p>
                            </div>
                        </div>
                        <select id="encoding" class="config-select" data-key="encoding">
                            <option value="utf8">UTF-8</option>
                            <option value="gbk">GBK</option>
                        </select>
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="decoding">
                            <span data-i18n="page.mcdr.form.decoding"></span>
                            <span class="config-tip" data-i18n="page.mcdr.form.decoding_tip"></span>
                        </label>
                        <select id="decoding" class="config-select" data-key="decoding">
                            <option value="utf8">UTF-8</option>
                            <option value="gbk">GBK</option>
                        </select>
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="plugin_directories">
                            <span data-i18n="page.mcdr.form.plugin_directories"></span>
                            <span class="config-tip" data-i18n="page.mcdr.form.plugin_directories_tip"></span>
                        </label>
                        <input type="text" id="plugin_directories" class="config-input multiple-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="plugin_directories">
                    </div>
                    
                    <div class="config-item">
                        <div class="flex items-center">
                            <input type="checkbox" id="check_update" class="config-input h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800" data-key="check_update">
                            <label class="config-label ml-2" for="check_update">
                                <span data-i18n="page.mcdr.form.check_update"></span>
                                <span class="config-tip" data-i18n="page.mcdr.form.check_update_tip"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="config-item">
                        <div class="flex items-center">
                            <input type="checkbox" id="advanced_console" class="config-input h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800" data-key="advanced_console">
                            <label class="config-label ml-2" for="advanced_console">
                                <span data-i18n="page.mcdr.form.advanced_console"></span>
                                <span class="config-tip" data-i18n="page.mcdr.form.advanced_console_tip"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="config-item">
                        <div class="flex items-center">
                            <input type="checkbox" id="disable_console_thread" class="config-input h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800" data-key="disable_console_thread">
                            <label class="config-label ml-2" for="disable_console_thread">
                                <span data-i18n="page.mcdr.form.disable_console_thread"></span>
                                <span class="config-tip" data-i18n="page.mcdr.form.disable_console_thread_tip"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="config-item">
                        <div class="flex items-center">
                            <input type="checkbox" id="disable_console_color" class="config-input h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800" data-key="disable_console_color">
                            <label class="config-label ml-2" for="disable_console_color">
                                <span data-i18n="page.mcdr.form.disable_console_color"></span>
                                <span class="config-tip" data-i18n="page.mcdr.form.disable_console_color_tip"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="custom_handlers">
                            <span data-i18n="page.mcdr.form.custom_handlers"></span>
                            <span class="config-tip" data-i18n="page.mcdr.form.custom_handlers_tip"></span>
                        </label>
                        <div class="about-list">
                            <div class="about-item">
                                <p data-i18n="page.mcdr.form.custom_handlers_desc"></p>
                                <p class="mt-1" data-i18n="page.mcdr.form.custom_handlers_desc2"></p>
                                <p class="mt-1" data-i18n="page.mcdr.form.custom_handlers_desc3"></p>
                                <p class="mt-1" data-i18n="page.mcdr.form.custom_handlers_doc"></p>
                            </div>
                        </div>
                        <input type="text" id="custom_handlers" class="config-input multiple-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="custom_handlers">
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="custom_info_reactors">
                            <span data-i18n="page.mcdr.form.custom_info_reactors"></span>
                        </label>
                        <div class="about-list">
                            <div class="about-item">
                                <p data-i18n="page.mcdr.form.custom_info_reactors_desc"></p>
                                <p class="mt-1" data-i18n="page.mcdr.form.custom_info_reactors_desc2"></p>
                                <p class="mt-1" data-i18n="page.mcdr.form.custom_info_reactors_doc"></p>
                            </div>
                        </div>
                        <input type="text" id="custom_info_reactors" class="config-input multiple-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="custom_info_reactors">
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="watchdog_threshold">
                            <a href="https://docs.mcdreforged.com/zh-cn/latest/plugin_dev/watchdog.html" target="_blank" data-i18n="page.mcdr.form.watchdog"></a> <span data-i18n="page.mcdr.form.watchdog_threshold"></span>
                            <span class="config-tip" data-i18n="page.mcdr.form.watchdog_threshold_tip"></span>
                        </label>
                        <input type="text" id="watchdog_threshold" class="config-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="watchdog_threshold">
                    </div>
                    
                    <div class="config-item">
                        <div class="flex items-center">
                            <input type="checkbox" id="handler_detection" class="config-input h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800" data-key="handler_detection">
                            <label class="config-label ml-2" for="handler_detection">
                                <span data-i18n="page.mcdr.form.handler_detection"></span>
                            </label>
                        </div>
                        <div class="about-list mt-2">
                            <div class="about-item">
                                <p data-i18n="page.mcdr.form.handler_detection_desc"></p>
                                <p class="mt-1" data-i18n="page.mcdr.form.handler_detection_desc2"></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="catalogue_meta_cache_ttl">
                            <span data-i18n="page.mcdr.form.catalogue_meta_cache_ttl"></span>
                            <span class="config-tip" data-i18n="page.mcdr.form.catalogue_meta_cache_ttl_tip"></span>
                        </label>
                        <input type="text" id="catalogue_meta_cache_ttl" class="config-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="catalogue_meta_cache_ttl">
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="catalogue_meta_fetch_timeout">
                            <span data-i18n="page.mcdr.form.catalogue_meta_fetch_timeout"></span>
                            <span class="config-tip" data-i18n="page.mcdr.form.catalogue_meta_fetch_timeout_tip"></span>
                        </label>
                        <input type="text" id="catalogue_meta_fetch_timeout" class="config-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="catalogue_meta_fetch_timeout">
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="catalogue_meta_url">
                            <span data-i18n="page.mcdr.form.catalogue_meta_url"></span>
                            <span class="config-tip" data-i18n="page.mcdr.form.catalogue_meta_url_tip"></span>
                        </label>
                        <input type="text" id="catalogue_meta_url" class="config-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="catalogue_meta_url">
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="plugin_download_url">
                            <span data-i18n="page.mcdr.form.plugin_download_url"></span>
                            <span class="config-tip" data-i18n="page.mcdr.form.plugin_download_url_tip"></span>
                        </label>
                        <div class="about-list">
                            <div class="about-item">
                                <p data-i18n="page.mcdr.form.plugin_download_url_doc"></p>
                                <p class="mt-1" data-i18n="page.mcdr.form.plugin_download_url_vars"></p>
                                <ul>
                                    <li><span class="font-medium">{url}</span>: <span data-i18n="page.mcdr.form.plugin_download_url_var_url"></span></li>
                                    <li><span class="font-medium">{repos_owner}</span>: <span data-i18n="page.mcdr.form.plugin_download_url_var_repos_owner"></span></li>
                                    <li><span class="font-medium">{repos_name}</span>: <span data-i18n="page.mcdr.form.plugin_download_url_var_repos_name"></span></li>
                                    <li><span class="font-medium">{tag}</span>: <span data-i18n="page.mcdr.form.plugin_download_url_var_tag"></span></li>
                                    <li><span class="font-medium">{asset_name}</span>: <span data-i18n="page.mcdr.form.plugin_download_url_var_asset_name"></span></li>
                                    <li><span class="font-medium">{asset_id}</span>: <span data-i18n="page.mcdr.form.plugin_download_url_var_asset_id"></span></li>
                                </ul>
                                <p class="mt-1" data-i18n="page.mcdr.form.plugin_download_url_example"></p>
                            </div>
                        </div>
                        <input type="text" id="plugin_download_url" class="config-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="plugin_download_url">
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="plugin_download_timeout">
                            <span data-i18n="page.mcdr.form.plugin_download_timeout"></span>
                            <span class="config-tip" data-i18n="page.mcdr.form.plugin_download_timeout_tip"></span>
                        </label>
                        <input type="text" id="plugin_download_timeout" class="config-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="plugin_download_timeout">
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="plugin_pip_install_extra_args">
                            <span data-i18n="page.mcdr.form.plugin_pip_install_extra_args"></span>
                        </label>
                        <input type="text" id="plugin_pip_install_extra_args" class="config-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="plugin_pip_install_extra_args">
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="http_proxy">
                            <span data-i18n="page.mcdr.form.http_proxy"></span>
                        </label>
                        <div class="about-list">
                            <div class="about-item">
                                <p data-i18n="page.mcdr.form.http_proxy_desc"></p>
                                <p class="mt-1" data-i18n="page.mcdr.form.http_proxy_desc2"></p>
                                <p class="mt-1" data-i18n="page.mcdr.form.http_proxy_examples"></p>
                                <ul>
                                    <li>http_proxy: 'http://127.0.0.1:1081'</li>
                                    <li>https_proxy: 'http://127.0.0.1:1081'</li>
                                    <li data-i18n="page.mcdr.form.http_proxy_or"></li>
                                    <li>http_proxy: 'http://user:pass@192.168.0.1:8888'</li>
                                    <li>https_proxy: 'http://user:pass@192.168.0.1:8888'</li>
                                </ul>
                            </div>
                        </div>
                        <input type="text" id="http_proxy" class="config-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="http_proxy">
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="https_proxy">
                            <span data-i18n="page.mcdr.form.https_proxy"></span>
                        </label>
                        <input type="text" id="https_proxy" class="config-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="https_proxy">
                    </div>
                    
                    <!-- RCON配置 -->
                    <div class="config-group">
                        <h3 class="config-group-title" data-i18n="page.mcdr.rcon.title"></h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-4" data-i18n="page.mcdr.rcon.desc"></p>
                        
                        <div class="config-item-child">
                            <div class="config-item">
                                <div class="flex items-center">
                                    <input type="checkbox" id="rcon.enable" class="config-input h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800" data-key="rcon.enable">
                                    <label class="config-label ml-2" for="rcon.enable">
                                        <span data-i18n="page.mcdr.rcon.enable"></span>
                                        <span class="config-tip" data-i18n="page.mcdr.rcon.enable_tip"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="config-item">
                                <label class="config-label" for="rcon.address">
                                    <span data-i18n="page.mcdr.rcon.address"></span>
                                    <span class="config-tip" data-i18n="page.mcdr.rcon.address_tip"></span>
                                </label>
                                <input type="text" id="rcon.address" class="config-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="rcon.address">
                            </div>
                            
                            <div class="config-item">
                                <label class="config-label" for="rcon.port">
                                    <span data-i18n="page.mcdr.rcon.port"></span>
                                    <span class="config-tip" data-i18n="page.mcdr.rcon.port_tip"></span>
                                </label>
                                <input type="text" id="rcon.port" class="config-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="rcon.port">
                            </div>
                            
                            <div class="config-item">
                                <label class="config-label" for="rcon.password">
                                    <span data-i18n="page.mcdr.rcon.password"></span>
                                    <span class="config-tip" data-i18n="page.mcdr.rcon.password_tip"></span>
                                </label>
                                <input type="text" id="rcon.password" class="config-input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" data-key="rcon.password">
                            </div>
                        </div>
                    </div>
                    
                    <!-- 调试配置 -->
                    <div class="config-group">
                        <h3 class="config-group-title" data-i18n="page.mcdr.debug.title"></h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-4" data-i18n="page.mcdr.debug.desc"></p>
                        
                        <div class="config-item-child">
                            <div class="config-item">
                                <div class="flex items-center">
                                    <input type="checkbox" id="debug.all" class="config-input h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800" data-key="debug.all">
                                    <label class="config-label ml-2" for="debug.all">
                                        <span data-i18n="page.mcdr.debug.all"></span>
                                        <span class="config-tip" data-i18n="page.mcdr.debug.all_tip"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="config-item">
                                <div class="flex items-center">
                                    <input type="checkbox" id="debug.mcdr" class="config-input h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800" data-key="debug.mcdr">
                                    <label class="config-label ml-2" for="debug.mcdr">
                                        <span data-i18n="page.mcdr.debug.mcdr"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="config-item">
                                <div class="flex items-center">
                                    <input type="checkbox" id="debug.handler" class="config-input h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800" data-key="debug.handler">
                                    <label class="config-label ml-2" for="debug.handler">
                                        <span data-i18n="page.mcdr.debug.handler"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="config-item">
                                <div class="flex items-center">
                                    <input type="checkbox" id="debug.reactor" class="config-input h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800" data-key="debug.reactor">
                                    <label class="config-label ml-2" for="debug.reactor">
                                        <span data-i18n="page.mcdr.debug.reactor"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="config-item">
                                <div class="flex items-center">
                                    <input type="checkbox" id="debug.plugin" class="config-input h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800" data-key="debug.plugin">
                                    <label class="config-label ml-2" for="debug.plugin">
                                        <span data-i18n="page.mcdr.debug.plugin"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="config-item">
                                <div class="flex items-center">
                                    <input type="checkbox" id="debug.permission" class="config-input h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800" data-key="debug.permission">
                                    <label class="config-label ml-2" for="debug.permission">
                                        <span data-i18n="page.mcdr.debug.permission"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="config-item">
                                <div class="flex items-center">
                                    <input type="checkbox" id="debug.command" class="config-input h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800" data-key="debug.command">
                                    <label class="config-label ml-2" for="debug.command">
                                        <span data-i18n="page.mcdr.debug.command"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="config-item">
                                <div class="flex items-center">
                                    <input type="checkbox" id="debug.task_executor" class="config-input h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800" data-key="debug.task_executor">
                                    <label class="config-label ml-2" for="debug.task_executor">
                                        <span data-i18n="page.mcdr.debug.task_executor"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="btn-save" @click="saveConfig('config.yml')" data-i18n="common.save"></div>
                </div>

                <!-- PERMISSION.YML 配置表单 -->
                <div id="permission-yml-form" x-show="activeConfigFile === 'permission.yml'" class="config-section">
                    <h2 class="config-title" data-i18n="page.mcdr.perm.title"></h2>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-6" data-i18n="page.mcdr.perm.desc"></p>
                    
                    <div class="config-item">
                        <label class="config-label" for="default_level">
                            <span data-i18n="page.mcdr.perm.default_level"></span>
                            <span class="config-tip" data-i18n="page.mcdr.perm.default_level_tip"></span>
                        </label>
                        <select id="default_level" class="config-select" data-key="default_level">
                            <option value="0" data-i18n="page.mcdr.perm.level_0"></option>
                            <option value="1" data-i18n="page.mcdr.perm.level_1"></option>
                            <option value="2" data-i18n="page.mcdr.perm.level_2"></option>
                            <option value="3" data-i18n="page.mcdr.perm.level_3"></option>
                            <option value="4" data-i18n="page.mcdr.perm.level_4"></option>
                        </select>
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="owner">
                            <span data-i18n="page.mcdr.perm.owner"></span>
                            <span class="config-tip" data-i18n="page.mcdr.perm.owner_tip"></span>
                        </label>
                        <div class="tags-input-wrapper" x-data="{ tags: [], inputValue: '' }" x-init="
                            $watch('configData', () => {
                                const value = getNestedValue(configData, 'owner');
                                tags = Array.isArray(value) ? value.map(String) : [];
                            }, { immediate: true })
                        ">
                            <div class="tags-input-container">
                                <template x-for="(tag, index) in tags" :key="index">
                                    <span class="tag-item">
                                        <span x-text="tag"></span>
                                        <span class="close" @click="tags.splice(index, 1)"><i class="fas fa-times"></i></span>
                                    </span>
                                </template>
                                <input type="text" class="tags-input" x-model="inputValue" data-i18n-placeholder="page.mcdr.perm.add_player_placeholder" 
                                    @keydown.enter.prevent="if(inputValue.trim() !== '') { tags.push(inputValue.trim()); inputValue = ''; }">
                            </div>
                            <input type="hidden" id="owner" class="config-input multiple-input" data-key="owner" 
                                :value="JSON.stringify(tags)">
                            <button type="button" class="add-tag-btn" @click="if(inputValue.trim() !== '') { tags.push(inputValue.trim()); inputValue = ''; }">
                                <i class="fas fa-plus"></i><span data-i18n="page.mcdr.perm.add_player"></span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="admin">
                            <span data-i18n="page.mcdr.perm.admin"></span>
                            <span class="config-tip" data-i18n="page.mcdr.perm.admin_tip"></span>
                        </label>
                        <div class="tags-input-wrapper" x-data="{ tags: [], inputValue: '' }" x-init="
                            $watch('configData', () => {
                                const value = getNestedValue(configData, 'admin');
                                tags = Array.isArray(value) ? value.map(String) : [];
                            }, { immediate: true })
                        ">
                            <div class="tags-input-container">
                                <template x-for="(tag, index) in tags" :key="index">
                                    <span class="tag-item">
                                        <span x-text="tag"></span>
                                        <span class="close" @click="tags.splice(index, 1)"><i class="fas fa-times"></i></span>
                                    </span>
                                </template>
                                <input type="text" class="tags-input" x-model="inputValue" data-i18n-placeholder="page.mcdr.perm.add_player_placeholder" 
                                    @keydown.enter.prevent="if(inputValue.trim() !== '') { tags.push(inputValue.trim()); inputValue = ''; }">
                            </div>
                            <input type="hidden" id="admin" class="config-input multiple-input" data-key="admin" 
                                :value="JSON.stringify(tags)">
                            <button type="button" class="add-tag-btn" @click="if(inputValue.trim() !== '') { tags.push(inputValue.trim()); inputValue = ''; }">
                                <i class="fas fa-plus"></i><span data-i18n="page.mcdr.perm.add_player"></span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="helper">
                            <span data-i18n="page.mcdr.perm.helper"></span>
                            <span class="config-tip" data-i18n="page.mcdr.perm.helper_tip"></span>
                        </label>
                        <div class="tags-input-wrapper" x-data="{ tags: [], inputValue: '' }" x-init="
                            $watch('configData', () => {
                                const value = getNestedValue(configData, 'helper');
                                tags = Array.isArray(value) ? value.map(String) : [];
                            }, { immediate: true })
                        ">
                            <div class="tags-input-container">
                                <template x-for="(tag, index) in tags" :key="index">
                                    <span class="tag-item">
                                        <span x-text="tag"></span>
                                        <span class="close" @click="tags.splice(index, 1)"><i class="fas fa-times"></i></span>
                                    </span>
                                </template>
                                <input type="text" class="tags-input" x-model="inputValue" data-i18n-placeholder="page.mcdr.perm.add_player_placeholder" 
                                    @keydown.enter.prevent="if(inputValue.trim() !== '') { tags.push(inputValue.trim()); inputValue = ''; }">
                            </div>
                            <input type="hidden" id="helper" class="config-input multiple-input" data-key="helper" 
                                :value="JSON.stringify(tags)">
                            <button type="button" class="add-tag-btn" @click="if(inputValue.trim() !== '') { tags.push(inputValue.trim()); inputValue = ''; }">
                                <i class="fas fa-plus"></i><span data-i18n="page.mcdr.perm.add_player"></span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="user">
                            <span data-i18n="page.mcdr.perm.user"></span>
                            <span class="config-tip" data-i18n="page.mcdr.perm.user_tip"></span>
                        </label>
                        <div class="tags-input-wrapper" x-data="{ tags: [], inputValue: '' }" x-init="
                            $watch('configData', () => {
                                const value = getNestedValue(configData, 'user');
                                tags = Array.isArray(value) ? value.map(String) : [];
                            }, { immediate: true })
                        ">
                            <div class="tags-input-container">
                                <template x-for="(tag, index) in tags" :key="index">
                                    <span class="tag-item">
                                        <span x-text="tag"></span>
                                        <span class="close" @click="tags.splice(index, 1)"><i class="fas fa-times"></i></span>
                                    </span>
                                </template>
                                <input type="text" class="tags-input" x-model="inputValue" data-i18n-placeholder="page.mcdr.perm.add_player_placeholder" 
                                    @keydown.enter.prevent="if(inputValue.trim() !== '') { tags.push(inputValue.trim()); inputValue = ''; }">
                            </div>
                            <input type="hidden" id="user" class="config-input multiple-input" data-key="user" 
                                :value="JSON.stringify(tags)">
                            <button type="button" class="add-tag-btn" @click="if(inputValue.trim() !== '') { tags.push(inputValue.trim()); inputValue = ''; }">
                                <i class="fas fa-plus"></i><span data-i18n="page.mcdr.perm.add_player"></span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="config-item">
                        <label class="config-label" for="guest">
                            <span data-i18n="page.mcdr.perm.guest"></span>
                            <span class="config-tip" data-i18n="page.mcdr.perm.guest_tip"></span>
                        </label>
                        <div class="tags-input-wrapper" x-data="{ tags: [], inputValue: '' }" x-init="
                            $watch('configData', () => {
                                const value = getNestedValue(configData, 'guest');
                                tags = Array.isArray(value) ? value.map(String) : [];
                            }, { immediate: true })
                        ">
                            <div class="tags-input-container">
                                <template x-for="(tag, index) in tags" :key="index">
                                    <span class="tag-item">
                                        <span x-text="tag"></span>
                                        <span class="close" @click="tags.splice(index, 1)"><i class="fas fa-times"></i></span>
                                    </span>
                                </template>
                                <input type="text" class="tags-input" x-model="inputValue" data-i18n-placeholder="page.mcdr.perm.add_player_placeholder" 
                                    @keydown.enter.prevent="if(inputValue.trim() !== '') { tags.push(inputValue.trim()); inputValue = ''; }">
                            </div>
                            <input type="hidden" id="guest" class="config-input multiple-input" data-key="guest" 
                                :value="JSON.stringify(tags)">
                            <button type="button" class="add-tag-btn" @click="if(inputValue.trim() !== '') { tags.push(inputValue.trim()); inputValue = ''; }">
                                <i class="fas fa-plus"></i><span data-i18n="page.mcdr.perm.add_player"></span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="btn-save" @click="saveConfig('permission.yml')" data-i18n="common.save"></div>
                </div>
                
                <!-- 页脚 -->
                <footer class="mt-12 text-center text-sm text-gray-500 dark:text-gray-400">
                    <p data-i18n="common.copyright"></p>
                </footer>
            </main>
        </div>

        <!-- 导入main.js -->
        <script src="js/main.js"></script>
        <!-- 导入mcdr-config.js -->
        <script src="js/mcdr-config.js"></script>
        
        <!-- 公告脚本 -->
        <script src="js/notice.js"></script>
    </div>
</body>
</html>