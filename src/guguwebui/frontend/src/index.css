@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --foreground-rgb: 0, 0, 0;
    --background-start-rgb: 214, 219, 220;
    --background-end-rgb: 255, 255, 255;
  }

  .dark {
    --foreground-rgb: 255, 255, 255;
    --background-start-rgb: 0, 0, 0;
    --background-end-rgb: 0, 0, 0;
  }

  * {
    @apply border-slate-200 dark:border-slate-800;
  }

  body {
    @apply bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 antialiased;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
  }
}

@layer utilities {
  .animate-shake {
    animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
  }
}

@keyframes shake {
  10%, 90% { transform: translate3d(-1px, 0, 0); }
  20%, 80% { transform: translate3d(2px, 0, 0); }
  30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
  40%, 60% { transform: translate3d(4px, 0, 0); }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-slate-300 dark:bg-slate-700 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-slate-400 dark:bg-slate-600;
}

/* GitHub markdown (github-markdown-css) dark mode overrides */
.markdown-body {
  background: transparent !important;
}

.dark .markdown-body {
  color: rgb(226, 232, 240); /* slate-200 */
}

.dark .markdown-body a {
  color: rgb(96, 165, 250); /* blue-400 */
}

.dark .markdown-body hr {
  border-color: rgb(51, 65, 85); /* slate-700 */
}

.dark .markdown-body blockquote {
  color: rgb(148, 163, 184); /* slate-400 */
  border-left-color: rgb(51, 65, 85); /* slate-700 */
}

.dark .markdown-body code,
.dark .markdown-body tt {
  background-color: rgba(148, 163, 184, 0.12); /* slate-400/12 */
}

.dark .markdown-body pre {
  /* keep dark even if github css loads later */
  background-color: #0d1117 !important; /* GitHub dark */
  color: #c9d1d9 !important;
}

.dark .markdown-body pre code {
  background-color: transparent !important;
  color: inherit !important;
}

.dark .markdown-body code,
.dark .markdown-body tt {
  color: #c9d1d9 !important;
}

/* images: avoid inline forced layout, allow wrapping */
.markdown-body img {
  display: inline-block;
  max-width: 100%;
  height: auto;
}

.markdown-body p > img {
  display: inline-block;
}

.dark .markdown-body table th,
.dark .markdown-body table td {
  border-color: rgb(51, 65, 85); /* slate-700 */
}

.dark .markdown-body table tr {
  background-color: transparent;
}

.dark .markdown-body table tr:nth-child(2n) {
  background-color: rgba(51, 65, 85, 0.18); /* slate-700/18 */
}

/* RText hover tooltip */
.rtext-hoverable {
  position: relative;
  cursor: help;
}

.rtext-hoverable:hover::after {
  content: attr(data-hover-content);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.9);
  color: white;
  padding: 8px 12px;
  border-radius: 6px;
  font-size: 14px;
  line-height: 1.4;
  max-width: 300px;
  word-wrap: break-word;
  white-space: pre-wrap;
  z-index: 1000;
  pointer-events: none;
  margin-bottom: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.rtext-obfuscated {
  font-family: monospace;
  letter-spacing: 0.1em;
}